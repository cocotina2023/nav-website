# Nav Website - å¼€å‘æ–‡æ¡£

æœ¬æ–‡æ¡£æä¾›å¼€å‘ç¯å¢ƒçš„æ­å»ºå’Œä½¿ç”¨æŒ‡å—ã€‚

## ğŸ“‹ ç›®å½•

- [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [APIæ¥å£](#apiæ¥å£)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Node.js >= 18.x
- npm >= 9.x

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd web
npm install
cd ..
```

### 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ

**åç«¯ (ç«¯å£ 3000):**

```bash
npm run dev
```

æˆ–ä½¿ç”¨ Node.js è‡ªå¸¦çš„ watch æ¨¡å¼ï¼š

```bash
npm start
```

**å‰ç«¯ (ç«¯å£ 5173):**

```bash
cd web
npm run dev
```

è®¿é—®: http://localhost:5173

### 3. é»˜è®¤è´¦å·

- ç”¨æˆ·å: `admin`
- å¯†ç : `123456`

**âš ï¸ è¯·åœ¨é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”¹å¯†ç !**

## ğŸ“ é¡¹ç›®ç»“æ„

```
nav-website/
â”œâ”€â”€ app.js                 # Express åº”ç”¨å…¥å£
â”œâ”€â”€ config.js              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ db.js                  # æ•°æ®åº“è¿æ¥å’Œåˆå§‹åŒ–
â”œâ”€â”€ package.json           # åç«¯ä¾èµ–
â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”‚   â””â”€â”€ auth.js           # JWT è®¤è¯ä¸­é—´ä»¶
â”œâ”€â”€ routes/               # è·¯ç”±
â”‚   â”œâ”€â”€ auth.js          # è®¤è¯è·¯ç”± (ç™»å½•/æ³¨å†Œ)
â”‚   â”œâ”€â”€ menu.js          # èœå•ç®¡ç†
â”‚   â”œâ”€â”€ card.js          # å¡ç‰‡ç®¡ç†
â”‚   â”œâ”€â”€ ad.js            # å¹¿å‘Šç®¡ç†
â”‚   â”œâ”€â”€ friend.js        # å‹é“¾ç®¡ç†
â”‚   â””â”€â”€ user.js          # ç”¨æˆ·ç®¡ç†
â”œâ”€â”€ database/            # æ•°æ®åº“
â”‚   â”œâ”€â”€ schema.sql      # æ•°æ®åº“ç»“æ„
â”‚   â”œâ”€â”€ init.js         # åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ nav.db          # SQLite æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ uploads/            # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â””â”€â”€ web/                # å‰ç«¯é¡¹ç›® (Vue 3 + Vite)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api.js            # API å°è£…
    â”‚   â”œâ”€â”€ main.js           # å…¥å£æ–‡ä»¶
    â”‚   â”œâ”€â”€ router.js         # è·¯ç”±é…ç½®
    â”‚   â”œâ”€â”€ App.vue           # æ ¹ç»„ä»¶
    â”‚   â”œâ”€â”€ style.css         # å…¨å±€æ ·å¼
    â”‚   â”œâ”€â”€ components/       # ç»„ä»¶
    â”‚   â”‚   â”œâ”€â”€ MenuBar.vue  # èœå•æ 
    â”‚   â”‚   â””â”€â”€ CardGrid.vue # å¡ç‰‡ç½‘æ ¼
    â”‚   â””â”€â”€ views/           # é¡µé¢
    â”‚       â”œâ”€â”€ Home.vue     # é¦–é¡µ
    â”‚       â”œâ”€â”€ Admin.vue    # ç®¡ç†åå°
    â”‚       â””â”€â”€ admin/       # ç®¡ç†é¡µé¢
    â””â”€â”€ package.json         # å‰ç«¯ä¾èµ–
```

## ğŸ”Œ APIæ¥å£

### è®¤è¯æ¥å£

**POST /api/auth/register** - æ³¨å†Œ
```json
{
  "username": "user",
  "password": "password123"
}
```

**POST /api/auth/login** - ç™»å½•
```json
{
  "username": "admin",
  "password": "123456"
}
```

è¿”å›:
```json
{
  "message": "ç™»å½•æˆåŠŸ",
  "token": "eyJhbGciOiJIUzI1NiIs..."
}
```

### éœ€è¦è®¤è¯çš„æ¥å£

æ‰€æœ‰ POSTã€PUTã€DELETE æ“ä½œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ JWT Token:

```
Authorization: Bearer <token>
```

### èœå•æ¥å£

- `GET /api/menu` - è·å–æ‰€æœ‰èœå•
- `POST /api/menu` - åˆ›å»ºèœå• (éœ€è®¤è¯)
- `PUT /api/menu/:id` - æ›´æ–°èœå• (éœ€è®¤è¯)
- `DELETE /api/menu/:id` - åˆ é™¤èœå• (éœ€è®¤è¯)

### å¡ç‰‡æ¥å£

- `GET /api/card?menu_id=1` - è·å–å¡ç‰‡ï¼ˆå¯æŒ‰èœå•è¿‡æ»¤ï¼‰
- `POST /api/card` - åˆ›å»ºå¡ç‰‡ (éœ€è®¤è¯)
- `PUT /api/card/:id` - æ›´æ–°å¡ç‰‡ (éœ€è®¤è¯)
- `DELETE /api/card/:id` - åˆ é™¤å¡ç‰‡ (éœ€è®¤è¯)

### å¹¿å‘Šæ¥å£

- `GET /api/ad` - è·å–å¹¿å‘Šåˆ—è¡¨
- `POST /api/ad` - æ·»åŠ å¹¿å‘Š (éœ€è®¤è¯)
- `PUT /api/ad/:id` - æ›´æ–°å¹¿å‘Š (éœ€è®¤è¯)
- `DELETE /api/ad/:id` - åˆ é™¤å¹¿å‘Š (éœ€è®¤è¯)

### å‹é“¾æ¥å£

- `GET /api/friend` - è·å–å‹é“¾åˆ—è¡¨
- `POST /api/friend` - æ·»åŠ å‹é“¾ (éœ€è®¤è¯)
- `PUT /api/friend/:id` - æ›´æ–°å‹é“¾ (éœ€è®¤è¯)
- `DELETE /api/friend/:id` - åˆ é™¤å‹é“¾ (éœ€è®¤è¯)

### ç”¨æˆ·æ¥å£

- `GET /api/user` - è·å–æ‰€æœ‰ç”¨æˆ· (éœ€è®¤è¯)
- `PUT /api/user/:id/password` - ä¿®æ”¹å¯†ç  (éœ€è®¤è¯)
- `DELETE /api/user/:id` - åˆ é™¤ç”¨æˆ· (éœ€è®¤è¯)

## ğŸ—„ï¸ æ•°æ®åº“

é¡¹ç›®ä½¿ç”¨ SQLite æ•°æ®åº“ï¼Œä½äº `database/nav.db`ã€‚

### è¡¨ç»“æ„

- **users** - ç”¨æˆ·è¡¨
- **menus** - èœå•è¡¨
- **cards** - å¡ç‰‡è¡¨
- **ads** - å¹¿å‘Šè¡¨
- **friends** - å‹é“¾è¡¨

### é‡æ–°åˆå§‹åŒ–æ•°æ®åº“

å¦‚æœéœ€è¦é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š

```bash
# åˆ é™¤ç°æœ‰æ•°æ®åº“
rm database/nav.db

# é‡å¯åº”ç”¨ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶åˆå§‹åŒ–
npm start
```

æˆ–ä½¿ç”¨åˆå§‹åŒ–è„šæœ¬ï¼š

```bash
npm run init:db
```

## âš ï¸ å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

ç¡®ä¿ `database/` ç›®å½•å­˜åœ¨ä¸”æœ‰å†™å…¥æƒé™ï¼š

```bash
mkdir -p database
chmod 755 database
```

### 2. ç«¯å£å·²è¢«å ç”¨

ä¿®æ”¹ `.env` æ–‡ä»¶æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
PORT=3001 npm start
```

### 3. CORS é”™è¯¯

ç¡®ä¿å‰ç«¯çš„ API ä»£ç†é…ç½®æ­£ç¡®ï¼ˆ`web/vite.config.mjs`ï¼‰ï¼š

```javascript
proxy: {
  '/api': 'http://localhost:3000'
}
```

### 4. è®¤è¯å¤±è´¥

- æ£€æŸ¥ JWT Token æ˜¯å¦åœ¨è¯·æ±‚å¤´ä¸­æ­£ç¡®è®¾ç½®
- Token æœ‰æ•ˆæœŸä¸º 7 å¤©ï¼Œè¿‡æœŸéœ€è¦é‡æ–°ç™»å½•
- ç¡®ä¿ä½¿ç”¨ `Bearer <token>` æ ¼å¼

## ğŸ—ï¸ æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### æ„å»ºå‰ç«¯

```bash
cd web
npm run build
```

æ„å»ºç»“æœåœ¨ `web/dist` ç›®å½•ã€‚

### ç”Ÿäº§æ¨¡å¼è¿è¡Œ

```bash
NODE_ENV=production PORT=4500 npm start
```

ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œåç«¯ä¼šè‡ªåŠ¨æœåŠ¡å‰ç«¯é™æ€æ–‡ä»¶ã€‚

## ğŸ³ Docker éƒ¨ç½²

å‚è€ƒä¸» [README.md](README.md) æ–‡ä»¶ã€‚

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- ä½¿ç”¨ ES6+ è¯­æ³•
- ä½¿ç”¨ async/await å¤„ç†å¼‚æ­¥æ“ä½œ
- å‡½æ•°å’Œå˜é‡ä½¿ç”¨é©¼å³°å‘½å
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤é—®é¢˜
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·é“¾æ›´æ–°
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## ğŸ“„ è®¸å¯è¯

MIT License
